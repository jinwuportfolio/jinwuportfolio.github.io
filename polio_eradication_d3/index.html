<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <link rel="stylesheet" type="text/css" href="css/d3.slider.css">
  <script src="js/d3.min.js"></script>
  <script src="http://d3js.org/topojson.v1.min.js"></script>
  <script src="js/d3-tip.js"></script>
<!-- <script src="d3.slider.js"></script>
<script src="https://raw.github.com/fryn/html5slider/master/html5slider.js"></script> -->
    <style>
    h1 {
      text-align: center;
      font-family: helvetica, sans-serif;
      margin-top:3%;
      font-weight: 500;
    }

    p {
      font-family:helvetica, sans-serif;
    }

    #dataViz {
      width:70%;
      float: right;
    }

    #note {
      margin-left: 12%;
      width: 17%;
      float: left;
    }

    #time_slider {
      margin-top: 3%;
      margin-left: 10%;
      margin-right:10%;
    }

    #text {
      font-size: 2em;
      font-family: helvetica, arial, vsans-serif;
      color: rgb(249, 77, 0);
      margin-left: 10%;
      margin-top: 3%;
      font-weight: bold;
    }

    /* Tooltip CSS */
    .d3-tip {
    line-height: 1.5;
    font-weight: 400;
    font-family:"avenir next", Arial, sans-serif;
    padding: 6px;
    background: rgba(0, 0, 0, 0.6);
    color: #FFA500;
    border-radius: 1px;
    pointer-events: none;
    }

    /* Creates a small triangle extender for the tooltip */
    .d3-tip:after {      
      box-sizing: border-box;
      display: inline;
      font-size: 8px;
      width: 100%;
      line-height: 1.5;
      color: rgba(0, 0, 0, 0.6);
      position: absolute;
      pointer-events: none;
    }

    /* Northward tooltips */
    .d3-tip.n:after {
      content: "\25BC";
      margin: -1px 0 0 0;
      top: 100%;
      left: 0;
      text-align: center;
    }

    /* Eastward tooltips */
    .d3-tip.e:after {
      content: "\25C0";
      margin: -4px 0 0 0;
      top: 50%;
      left: -8px;
    }

    /* Southward tooltips */
    .d3-tip.s:after {
      content: "\25B2";
      margin: 0 0 1px 0;
      top: -8px;
      left: 0;
      text-align: center;
    }

    /* Westward tooltips */
    .d3-tip.w:after {
      content: "\25B6";
      margin: -4px 0 0 -1px;
      top: 50%;
      left: 100%;
    }



  </style>

<body>
<h1>Global Polio Eradication Progress (1988-2015)</h1>
<div id="time_slider"></div>
<p id="text">1988</p>


<div id="note" style="margin-top:3%;">
  <p style="font-size:1.2em;font-family:helvetica;">This map shows the progress of polio eradication since 1988 when <span style="color:rgb(249, 77, 0)">Global Polio Eradication Initiative</span> was established.</p>

  <p style="font-size: 2em; font-family: helvetica; padding-left: 5%; border-left: 10px solid rgb(249, 77, 0);"><span id="countrynumber" style="background-color:rgb(249, 77, 0);color:white;font-size:1.3em;">67</span> countries harbored wild polio virus in <span id="year" style="background-color:rgb(249, 77, 0);color:white;font-size:1.3em;">1988</span>.

  <p style="font-size:0.6em;">Source: World Health Organization, October 2015</p>
  <p style="font-size:0.6em;">Produced by Jin Wu</p>
</div>
<div id="dataViz"></div>


<script src="js/d3.slider.js"></script>

<script>
// Set tooltips
var axis = d3.svg.axis().orient("top").ticks(4);

var tip = d3.tip()
            .attr('class', 'd3-tip')
            // .offset([-10, 0])
            .html(function(d) {
              // return d.name + " has <br>" + d.value + " stateless people";
              return d.properties.name;
            })

// Set margin, with and height
var margin = {top: 20, right: 30, bottom: 30, left: 30},
            width = 900 - margin.left - margin.right,
            height = 500 - margin.top - margin.bottom;  
// Set projection 
var projection = d3.geo.mercator()
                   .scale(130)
                   .translate( [width / 2, height / 1.5]);
// Set path
var path = d3.geo.path().projection(projection);
// Setsvg and then give it a class called map
var svg = d3.select("#dataViz")
            .append("svg")
            .attr("width", width)
            .attr("height", height)
            .append('g')
            .attr('class', 'map');
// Call tooltips
svg.call(tip);


d3.csv("data/polio_1988.csv",function(data) {

        d3.json("world_countries.json", function(json) {
      
            for (var i=0; i< data.length; i++) {
          var dataCountry = data[i].name;

          var dataValue = parseFloat(data[i].value);

          for (var j = 0; j < json.features.length; j++) {
            var jsonCountry = json.features[j].properties.name;

            if (dataCountry == jsonCountry) {
              json.features[j].properties.value = dataValue;

              break;
            }
          }
        }
      
        svg.selectAll("path")
          .data(json.features)
          .enter()
          .append("path")
          .attr("class","map")
          .attr("d",path)
          .style("fill",function(d) {
            var value = d.properties.value;
            if (value ==1) {
              return "rgb(249, 77, 0)";
            } else {
              return "rgb(192,192,192)";
            }
          })
          .style("stroke","white")
          .style("stroke-width",0.3)
          .style("opacity",0.8)
          .on("mouseover",function(d) {
            tip.show(d);
            d3.select(this)
              .style("opacity",1)
              .style("stroke-width",1.5);
          })
          .on("mouseout",function(d) {
            tip.hide(d);
            d3.select(this)
            .style("opacity",0.8)
            .style("stroke-width",0.3);
          })


        // svg.selectAll("text")
        // .data(json.features)
        // .enter()
        // .append("svg:text")
        // .text(function(d) {
        //   return d.properties.name;
        // })
        // .attr("x",function(d){
        //   return path.centroid(d)[0];
        // })
        // .attr("y",function(d){
        //   return path.centroid(d)[1];
        // })
        // .attr("text-anchor","middle")
        // .attr('font-size','6pt');
      });

  });

  var function1988 = function() {
      document.getElementById("text").innerHTML = "1988";
               document.getElementById("year").innerHTML = "1988";
      document.getElementById("countrynumber").innerHTML = "67";

      svg.selectAll("path").remove();

     d3.csv("data/polio_1988.csv",function(data) {

        d3.json("world_countries.json", function(json) {
      
            for (var i=0; i< data.length; i++) {
          var dataCountry = data[i].name;

          var dataValue = parseFloat(data[i].value);

          for (var j = 0; j < json.features.length; j++) {
            var jsonCountry = json.features[j].properties.name;

            if (dataCountry == jsonCountry) {
              json.features[j].properties.value = dataValue;

              break;
            }
          }
        }

        svg.selectAll("path")
          .data(json.features)
          .enter()
          .append("path")
          .attr("class","map")
          .attr("d",path)
          .style("fill",function(d) {
            var value = d.properties.value;
            if (value ==1) {
              return "rgb(249, 77, 0)";
            } else {
              return "rgb(192,192,192)";
            }
          })
          .style("stroke","white")
          .style("stroke-width",0.3)
          .style("opacity",0.8)   
          .on("mouseover",function(d) {
            tip.show(d);
            d3.select(this)
              .style("opacity",1)
              .style("stroke-width",1.5);
          })
          .on("mouseout",function(d) {
            tip.hide(d);
            d3.select(this)
            .style("opacity",0.8)
            .style("stroke-width",0.3);
          })

      });

  });
  };

    var function1989 = function() {
      document.getElementById("text").innerHTML = "1989";
      document.getElementById("year").innerHTML = "1989";
      document.getElementById("countrynumber").innerHTML = "64";

      svg.selectAll("path").remove();

      d3.csv("data/polio_1989.csv",function(data) {

        d3.json("world_countries.json", function(json) {
      
            for (var i=0; i< data.length; i++) {
          var dataCountry = data[i].name;

          var dataValue = parseFloat(data[i].value);

          for (var j = 0; j < json.features.length; j++) {
            var jsonCountry = json.features[j].properties.name;

            if (dataCountry == jsonCountry) {
              json.features[j].properties.value = dataValue;

              break;
            }
          }
        }

        svg.selectAll("path")
          .data(json.features)
          .enter()
          .append("path")
          .attr("class","map")
          .attr("d",path)
          .style("fill",function(d) {
            var value = d.properties.value;
            if (value ==1) {
              return "rgb(249, 77, 0)";
            } else {
              return "rgb(192,192,192)";
            }
          })
          .style("stroke","white")
          .style("stroke-width",0.3)
          .style("opacity",0.8)   
          .on("mouseover",function(d) {
            tip.show(d);
            d3.select(this)
              .style("opacity",1)
              .style("stroke-width",1.5);
          })
          .on("mouseout",function(d) {
            tip.hide(d);
            d3.select(this)
            .style("opacity",0.8)
            .style("stroke-width",0.3);
          })

      });

  });
  };

  var function1990 = function() {
      document.getElementById("text").innerHTML = "1990";
      document.getElementById("year").innerHTML = "1990";
      document.getElementById("countrynumber").innerHTML = "58";

      svg.selectAll("path").remove();

      d3.csv("data/polio_1990.csv",function(data) {

        d3.json("world_countries.json", function(json) {
      
            for (var i=0; i< data.length; i++) {
          var dataCountry = data[i].name;

          var dataValue = parseFloat(data[i].value);

          for (var j = 0; j < json.features.length; j++) {
            var jsonCountry = json.features[j].properties.name;

            if (dataCountry == jsonCountry) {
              json.features[j].properties.value = dataValue;

              break;
            }
          }
        }

        svg.selectAll("path")
          .data(json.features)
          .enter()
          // .transition()
          // .duration(1000)
          .append("path")
          .attr("class","map")
          .attr("d",path)
          .style("fill",function(d) {
            var value = d.properties.value;
            if (value ==1) {
              return "rgb(249, 77, 0)";
            } else {
              return "rgb(192,192,192)";
            }
          })
          .style("stroke","white")
          .style("stroke-width",0.3)   
           .style("opacity",0.8)   
          .on("mouseover",function(d) {
            tip.show(d);
            d3.select(this)
              .style("opacity",1)
              .style("stroke-width",1.5);
          })
          .on("mouseout",function(d) {
            tip.hide(d);
            d3.select(this)
            .style("opacity",0.8)
            .style("stroke-width",0.3);
          })
      });

  });
  };

   var function1991 = function() {
      document.getElementById("text").innerHTML = "1991";
      document.getElementById("year").innerHTML = "1991";
      document.getElementById("countrynumber").innerHTML = "55";

      svg.selectAll("path").remove();

      d3.csv("data/polio_1991.csv",function(data) {

        d3.json("world_countries.json", function(json) {
      
            for (var i=0; i< data.length; i++) {
          var dataCountry = data[i].name;

          var dataValue = parseFloat(data[i].value);

          for (var j = 0; j < json.features.length; j++) {
            var jsonCountry = json.features[j].properties.name;

            if (dataCountry == jsonCountry) {
              json.features[j].properties.value = dataValue;

              break;
            }
          }
        }

        svg.selectAll("path")
          .data(json.features)
          .enter()
          // .transition()
          // .duration(1000)
          .append("path")
          .attr("class","map")
          .attr("d",path)
          .style("fill",function(d) {
            var value = d.properties.value;
            if (value ==1) {
              return "rgb(249, 77, 0)";
            } else {
              return "rgb(192,192,192)";
            }
          })
          .style("stroke","white")
          .style("stroke-width",0.3)
          .style("opacity",0.8)   
          .on("mouseover",function(d) {
            tip.show(d);
            d3.select(this)
              .style("opacity",1)
              .style("stroke-width",1.5);
          })
          .on("mouseout",function(d) {
            tip.hide(d);
            d3.select(this)
            .style("opacity",0.8)
            .style("stroke-width",0.3);
          })
      });

  });
  };

   var function1992 = function() {
      document.getElementById("text").innerHTML = "1992";
      document.getElementById("year").innerHTML = "1992";
      document.getElementById("countrynumber").innerHTML = "51";

      svg.selectAll("path").remove();

      d3.csv("data/polio_1992.csv",function(data) {

        d3.json("world_countries.json", function(json) {
      
            for (var i=0; i< data.length; i++) {
          var dataCountry = data[i].name;

          var dataValue = parseFloat(data[i].value);

          for (var j = 0; j < json.features.length; j++) {
            var jsonCountry = json.features[j].properties.name;

            if (dataCountry == jsonCountry) {
              json.features[j].properties.value = dataValue;

              break;
            }
          }
        }

        svg.selectAll("path")
          .data(json.features)
          .enter()
          // .transition()
          // .duration(1000)
          .append("path")
          .attr("class","map")
          .attr("d",path)
          .style("fill",function(d) {
            var value = d.properties.value;
            if (value ==1) {
              return "rgb(249, 77, 0)";
            } else {
              return "rgb(192,192,192)";
            }
          })
          .style("stroke","white")
          .style("stroke-width",0.3)
          .style("opacity",0.8)   
          .on("mouseover",function(d) {
            tip.show(d);
            d3.select(this)
              .style("opacity",1)
              .style("stroke-width",1.5);
          })
          .on("mouseout",function(d) {
            tip.hide(d);
            d3.select(this)
            .style("opacity",0.8)
            .style("stroke-width",0.3);
          })
      });

  });
  };

   var function1993 = function() {
      document.getElementById("text").innerHTML = "1993";
      document.getElementById("year").innerHTML = "1993";
      document.getElementById("countrynumber").innerHTML = "48";

      svg.selectAll("path").remove();

      d3.csv("data/polio_1993.csv",function(data) {

        d3.json("world_countries.json", function(json) {
      
            for (var i=0; i< data.length; i++) {
          var dataCountry = data[i].name;

          var dataValue = parseFloat(data[i].value);

          for (var j = 0; j < json.features.length; j++) {
            var jsonCountry = json.features[j].properties.name;

            if (dataCountry == jsonCountry) {
              json.features[j].properties.value = dataValue;

              break;
            }
          }
        }

        svg.selectAll("path")
          .data(json.features)
          .enter()
          // .transition()
          // .duration(1000)
          .append("path")
          .attr("class","map")
          .attr("d",path)
          .style("fill",function(d) {
            var value = d.properties.value;
            if (value ==1) {
              return "rgb(249, 77, 0)";
            } else {
              return "rgb(192,192,192)";
            }
          })
          .style("stroke","white")
          .style("stroke-width",0.3)
           .style("opacity",0.8)   
          .on("mouseover",function(d) {
            tip.show(d);
            d3.select(this)
              .style("opacity",1)
              .style("stroke-width",1.5);
          })
          .on("mouseout",function(d) {
            tip.hide(d);
            d3.select(this)
            .style("opacity",0.8)
            .style("stroke-width",0.3);
          })
      });

  });
  };

   var function1994 = function() {
      document.getElementById("text").innerHTML = "1994";
      document.getElementById("year").innerHTML = "1994";
      document.getElementById("countrynumber").innerHTML = "46";

      svg.selectAll("path").remove();

      d3.csv("data/polio_1994.csv",function(data) {

        d3.json("world_countries.json", function(json) {
      
            for (var i=0; i< data.length; i++) {
          var dataCountry = data[i].name;

          var dataValue = parseFloat(data[i].value);

          for (var j = 0; j < json.features.length; j++) {
            var jsonCountry = json.features[j].properties.name;

            if (dataCountry == jsonCountry) {
              json.features[j].properties.value = dataValue;

              break;
            }
          }
        }

        svg.selectAll("path")
          .data(json.features)
          .enter()
          // .transition()
          // .duration(1000)
          .append("path")
          .attr("class","map")
          .attr("d",path)
          .style("fill",function(d) {
            var value = d.properties.value;
            if (value ==1) {
              return "rgb(249, 77, 0)";
            } else {
              return "rgb(192,192,192)";
            }
          })
          .style("stroke","white")
          .style("stroke-width",0.3)
           .style("opacity",0.8)   
          .on("mouseover",function(d) {
            tip.show(d);
            d3.select(this)
              .style("opacity",1)
              .style("stroke-width",1.5);
          })
          .on("mouseout",function(d) {
            tip.hide(d);
            d3.select(this)
            .style("opacity",0.8)
            .style("stroke-width",0.3);
          })
      });

  });
  };

   var function1995 = function() {
      document.getElementById("text").innerHTML = "1995";
      document.getElementById("year").innerHTML = "1995";
      document.getElementById("countrynumber").innerHTML = "44";

      svg.selectAll("path").remove();

      d3.csv("data/polio_1995.csv",function(data) {

        d3.json("world_countries.json", function(json) {
      
            for (var i=0; i< data.length; i++) {
          var dataCountry = data[i].name;

          var dataValue = parseFloat(data[i].value);

          for (var j = 0; j < json.features.length; j++) {
            var jsonCountry = json.features[j].properties.name;

            if (dataCountry == jsonCountry) {
              json.features[j].properties.value = dataValue;

              break;
            }
          }
        }

        svg.selectAll("path")
          .data(json.features)
          .enter()
          // .transition()
          // .duration(1000)
          .append("path")
          .attr("class","map")
          .attr("d",path)
          .style("fill",function(d) {
            var value = d.properties.value;
            if (value ==1) {
              return "rgb(249, 77, 0)";
            } else {
              return "rgb(192,192,192)";
            }
          })
          .style("stroke","white")
          .style("stroke-width",0.3)
           .style("opacity",0.8)   
          .on("mouseover",function(d) {
            tip.show(d);
            d3.select(this)
              .style("opacity",1)
              .style("stroke-width",1.5);
          })
          .on("mouseout",function(d) {
            tip.hide(d);
            d3.select(this)
            .style("opacity",0.8)
            .style("stroke-width",0.3);
          })
      });

  });
  };

   var function1996 = function() {
      document.getElementById("text").innerHTML = "1996";
      document.getElementById("year").innerHTML = "1996";
      document.getElementById("countrynumber").innerHTML = "38";

      svg.selectAll("path").remove();

      d3.csv("data/polio_1996.csv",function(data) {

        d3.json("world_countries.json", function(json) {
      
            for (var i=0; i< data.length; i++) {
          var dataCountry = data[i].name;

          var dataValue = parseFloat(data[i].value);

          for (var j = 0; j < json.features.length; j++) {
            var jsonCountry = json.features[j].properties.name;

            if (dataCountry == jsonCountry) {
              json.features[j].properties.value = dataValue;

              break;
            }
          }
        }

        svg.selectAll("path")
          .data(json.features)
          .enter()
          // .transition()
          // .duration(1000)
          .append("path")
          .attr("class","map")
          .attr("d",path)
          .style("fill",function(d) {
            var value = d.properties.value;
            if (value ==1) {
              return "rgb(249, 77, 0)";
            } else {
              return "rgb(192,192,192)";
            }
          })
          .style("stroke","white")
          .style("stroke-width",0.3)
           .style("opacity",0.8)   
          .on("mouseover",function(d) {
            tip.show(d);
            d3.select(this)
              .style("opacity",1)
              .style("stroke-width",1.5);
          })
          .on("mouseout",function(d) {
            tip.hide(d);
            d3.select(this)
            .style("opacity",0.8)
            .style("stroke-width",0.3);
          })   
      });

  });
  };

   var function1997 = function() {
      document.getElementById("text").innerHTML = "1997";
      document.getElementById("year").innerHTML = "1997";
      document.getElementById("countrynumber").innerHTML = "32";

      svg.selectAll("path").remove();

      d3.csv("data/polio_1997.csv",function(data) {

        d3.json("world_countries.json", function(json) {
      
            for (var i=0; i< data.length; i++) {
          var dataCountry = data[i].name;

          var dataValue = parseFloat(data[i].value);

          for (var j = 0; j < json.features.length; j++) {
            var jsonCountry = json.features[j].properties.name;

            if (dataCountry == jsonCountry) {
              json.features[j].properties.value = dataValue;

              break;
            }
          }
        }

        svg.selectAll("path")
          .data(json.features)
          .enter()
          // .transition()
          // .duration(1000)
          .append("path")
          .attr("class","map")
          .attr("d",path)
          .style("fill",function(d) {
            var value = d.properties.value;
            if (value ==1) {
              return "rgb(249, 77, 0)";
            } else {
              return "rgb(192,192,192)";
            }
          })
          .style("stroke","white")
          .style("stroke-width",0.3) 
          .style("opacity",0.8)   
          .on("mouseover",function(d) {
            tip.show(d);
            d3.select(this)
              .style("opacity",1)
              .style("stroke-width",1.5);
          })
          .on("mouseout",function(d) {
            tip.hide(d);
            d3.select(this)
            .style("opacity",0.8)
            .style("stroke-width",0.3);
          })   
      });

  });
  };

   var function1998 = function() {
      document.getElementById("text").innerHTML = "1998";
      document.getElementById("year").innerHTML = "1998";
      document.getElementById("countrynumber").innerHTML = "27";

      svg.selectAll("path").remove();

      d3.csv("data/polio_1998.csv",function(data) {

        d3.json("world_countries.json", function(json) {
      
            for (var i=0; i< data.length; i++) {
          var dataCountry = data[i].name;

          var dataValue = parseFloat(data[i].value);

          for (var j = 0; j < json.features.length; j++) {
            var jsonCountry = json.features[j].properties.name;

            if (dataCountry == jsonCountry) {
              json.features[j].properties.value = dataValue;

              break;
            }
          }
        }

        svg.selectAll("path")
          .data(json.features)
          .enter()
          // .transition()
          // .duration(1000)
          .append("path")
          .attr("class","map")
          .attr("d",path)
          .style("fill",function(d) {
            var value = d.properties.value;
            if (value ==1) {
              return "rgb(249, 77, 0)";
            } else {
              return "rgb(192,192,192)";
            }
          })
          .style("stroke","white")
          .style("stroke-width",0.3)
           .style("opacity",0.8)   
          .on("mouseover",function(d) {
            tip.show(d);
            d3.select(this)
              .style("opacity",1)
              .style("stroke-width",1.5);
          })
          .on("mouseout",function(d) {
            tip.hide(d);
            d3.select(this)
            .style("opacity",0.8)
            .style("stroke-width",0.3);
          })   
      });

  });
  };

   var function1999 = function() {
      document.getElementById("text").innerHTML = "1999";
      document.getElementById("year").innerHTML = "1999";
      document.getElementById("countrynumber").innerHTML = "25";

      svg.selectAll("path").remove();

      d3.csv("data/polio_1999.csv",function(data) {

        d3.json("world_countries.json", function(json) {
      
            for (var i=0; i< data.length; i++) {
          var dataCountry = data[i].name;

          var dataValue = parseFloat(data[i].value);

          for (var j = 0; j < json.features.length; j++) {
            var jsonCountry = json.features[j].properties.name;

            if (dataCountry == jsonCountry) {
              json.features[j].properties.value = dataValue;

              break;
            }
          }
        }

        svg.selectAll("path")
          .data(json.features)
          .enter()
          // .transition()
          // .duration(1000)
          .append("path")
          .attr("class","map")
          .attr("d",path)
          .style("fill",function(d) {
            var value = d.properties.value;
            if (value ==1) {
              return "rgb(249, 77, 0)";
            } else {
              return "rgb(192,192,192)";
            }
          })
          .style("stroke","white")
          .style("stroke-width",0.3)
           .style("opacity",0.8)   
          .on("mouseover",function(d) {
            tip.show(d);
            d3.select(this)
              .style("opacity",1)
              .style("stroke-width",1.5);
          })
          .on("mouseout",function(d) {
            tip.hide(d);
            d3.select(this)
            .style("opacity",0.8)
            .style("stroke-width",0.3);
          })   
      });

  });
  };

   var function2000 = function() {
      document.getElementById("text").innerHTML = "2000";
       document.getElementById("year").innerHTML = "2000";
      document.getElementById("countrynumber").innerHTML = "19";

      svg.selectAll("path").remove();

      d3.csv("data/polio_2000.csv",function(data) {

        d3.json("world_countries.json", function(json) {
      
            for (var i=0; i< data.length; i++) {
          var dataCountry = data[i].name;

          var dataValue = parseFloat(data[i].value);

          for (var j = 0; j < json.features.length; j++) {
            var jsonCountry = json.features[j].properties.name;

            if (dataCountry == jsonCountry) {
              json.features[j].properties.value = dataValue;

              break;
            }
          }
        }

        svg.selectAll("path")
          .data(json.features)
          .enter()
          // .transition()
          // .duration(1000)
          .append("path")
          .attr("class","map")
          .attr("d",path)
          .style("fill",function(d) {
            var value = d.properties.value;
            if (value ==1) {
              return "rgb(249, 77, 0)";
            } else {
              return "rgb(192,192,192)";
            }
          })
          .style("stroke","white")
          .style("stroke-width",0.3)
           .style("opacity",0.8)   
          .on("mouseover",function(d) {
            tip.show(d);
            d3.select(this)
              .style("opacity",1)
              .style("stroke-width",1.5);
          })
          .on("mouseout",function(d) {
            tip.hide(d);
            d3.select(this)
            .style("opacity",0.8)
            .style("stroke-width",0.3);
          })   
      });

  });
  };

   var function2001 = function() {
      document.getElementById("text").innerHTML = "2001";
       document.getElementById("year").innerHTML = "2001";
      document.getElementById("countrynumber").innerHTML = "9";


      svg.selectAll("path").remove();

      d3.csv("data/polio_2001.csv",function(data) {

        d3.json("world_countries.json", function(json) {
      
            for (var i=0; i< data.length; i++) {
          var dataCountry = data[i].name;

          var dataValue = parseFloat(data[i].value);

          for (var j = 0; j < json.features.length; j++) {
            var jsonCountry = json.features[j].properties.name;

            if (dataCountry == jsonCountry) {
              json.features[j].properties.value = dataValue;

              break;
            }
          }
        }

        svg.selectAll("path")
          .data(json.features)
          .enter()
          // .transition()
          // .duration(1000)
          .append("path")
          .attr("class","map")
          .attr("d",path)
          .style("fill",function(d) {
            var value = d.properties.value;
            if (value ==1) {
              return "rgb(249, 77, 0)";
            } else {
              return "rgb(192,192,192)";
            }
          })
          .style("stroke","white")
          .style("stroke-width",0.3)
           .style("opacity",0.8)   
          .on("mouseover",function(d) {
            tip.show(d);
            d3.select(this)
              .style("opacity",1)
              .style("stroke-width",1.5);
          })
          .on("mouseout",function(d) {
            tip.hide(d);
            d3.select(this)
            .style("opacity",0.8)
            .style("stroke-width",0.3);
          })   
      });

  });
  };

   var function2002 = function() {
      document.getElementById("text").innerHTML = "2002";
       document.getElementById("year").innerHTML = "2002";
      document.getElementById("countrynumber").innerHTML = "6";


      svg.selectAll("path").remove();

      d3.csv("data/polio_2002.csv",function(data) {

        d3.json("world_countries.json", function(json) {
      
            for (var i=0; i< data.length; i++) {
          var dataCountry = data[i].name;

          var dataValue = parseFloat(data[i].value);

          for (var j = 0; j < json.features.length; j++) {
            var jsonCountry = json.features[j].properties.name;

            if (dataCountry == jsonCountry) {
              json.features[j].properties.value = dataValue;

              break;
            }
          }
        }

        svg.selectAll("path")
          .data(json.features)
          .enter()
          // .transition()
          // .duration(1000)
          .append("path")
          .attr("class","map")
          .attr("d",path)
          .style("fill",function(d) {
            var value = d.properties.value;
            if (value ==1) {
              return "rgb(249, 77, 0)";
            } else {
              return "rgb(192,192,192)";
            }
          })
          .style("stroke","white")
          .style("stroke-width",0.3)
           .style("opacity",0.8)   
          .on("mouseover",function(d) {
            tip.show(d);
            d3.select(this)
              .style("opacity",1)
              .style("stroke-width",1.5);
          })
          .on("mouseout",function(d) {
            tip.hide(d);
            d3.select(this)
            .style("opacity",0.8)
            .style("stroke-width",0.3);
          })   
      });

  });
  };

   var function2003 = function() {
      document.getElementById("text").innerHTML = "2003";
       document.getElementById("year").innerHTML = "2003";
      document.getElementById("countrynumber").innerHTML = "6";


      svg.selectAll("path").remove();

      d3.csv("data/polio_2003.csv",function(data) {

        d3.json("world_countries.json", function(json) {
      
            for (var i=0; i< data.length; i++) {
          var dataCountry = data[i].name;

          var dataValue = parseFloat(data[i].value);

          for (var j = 0; j < json.features.length; j++) {
            var jsonCountry = json.features[j].properties.name;

            if (dataCountry == jsonCountry) {
              json.features[j].properties.value = dataValue;

              break;
            }
          }
        }

        svg.selectAll("path")
          .data(json.features)
          .enter()
          // .transition()
          // .duration(1000)
          .append("path")
          .attr("class","map")
          .attr("d",path)
          .style("fill",function(d) {
            var value = d.properties.value;
            if (value ==1) {
              return "rgb(249, 77, 0)";
            } else {
              return "rgb(192,192,192)";
            }
          })
          .style("stroke","white")
          .style("stroke-width",0.3)
           .style("opacity",0.8)   
          .on("mouseover",function(d) {
            tip.show(d);
            d3.select(this)
              .style("opacity",1)
              .style("stroke-width",1.5);
          })
          .on("mouseout",function(d) {
            tip.hide(d);
            d3.select(this)
            .style("opacity",0.8)
            .style("stroke-width",0.3);
          })  
      });

  });
  };

   var function2004 = function() {
      document.getElementById("text").innerHTML = "2004";
       document.getElementById("year").innerHTML = "2004";
      document.getElementById("countrynumber").innerHTML = "6";


      svg.selectAll("path").remove();

      d3.csv("data/polio_2004.csv",function(data) {

        d3.json("world_countries.json", function(json) {
      
            for (var i=0; i< data.length; i++) {
          var dataCountry = data[i].name;

          var dataValue = parseFloat(data[i].value);

          for (var j = 0; j < json.features.length; j++) {
            var jsonCountry = json.features[j].properties.name;

            if (dataCountry == jsonCountry) {
              json.features[j].properties.value = dataValue;

              break;
            }
          }
        }

        svg.selectAll("path")
          .data(json.features)
          .enter()
          // .transition()
          // .duration(1000)
          .append("path")
          .attr("class","map")
          .attr("d",path)
          .style("fill",function(d) {
            var value = d.properties.value;
            if (value ==1) {
              return "rgb(249, 77, 0)";
            } else {
              return "rgb(192,192,192)";
            }
          })
          .style("stroke","white")
          .style("stroke-width",0.3)
           .style("opacity",0.8)   
          .on("mouseover",function(d) {
            tip.show(d);
            d3.select(this)
              .style("opacity",1)
              .style("stroke-width",1.5);
          })
          .on("mouseout",function(d) {
            tip.hide(d);
            d3.select(this)
            .style("opacity",0.8)
            .style("stroke-width",0.3);
          })   
      });

  });
  };

   var function2005 = function() {
      document.getElementById("text").innerHTML = "2005";
       document.getElementById("year").innerHTML = "2005";
      document.getElementById("countrynumber").innerHTML = "5";


      svg.selectAll("path").remove();

      d3.csv("data/polio_2005.csv",function(data) {

        d3.json("world_countries.json", function(json) {
      
            for (var i=0; i< data.length; i++) {
          var dataCountry = data[i].name;

          var dataValue = parseFloat(data[i].value);

          for (var j = 0; j < json.features.length; j++) {
            var jsonCountry = json.features[j].properties.name;

            if (dataCountry == jsonCountry) {
              json.features[j].properties.value = dataValue;

              break;
            }
          }
        }

        svg.selectAll("path")
          .data(json.features)
          .enter()
          // .transition()
          // .duration(1000)
          .append("path")
          .attr("class","map")
          .attr("d",path)
          .style("fill",function(d) {
            var value = d.properties.value;
            if (value ==1) {
              return "rgb(249, 77, 0)";
            } else {
              return "rgb(192,192,192)";
            }
          })
          .style("stroke","white")
          .style("stroke-width",0.3)
           .style("opacity",0.8)   
          .on("mouseover",function(d) {
            tip.show(d);
            d3.select(this)
              .style("opacity",1)
              .style("stroke-width",1.5);
          })
          .on("mouseout",function(d) {
            tip.hide(d);
            d3.select(this)
            .style("opacity",0.8)
            .style("stroke-width",0.3);
          })   
      });

  });
  };

 var function2006 = function() {
      document.getElementById("text").innerHTML = "2006";
       document.getElementById("year").innerHTML = "2006";
      document.getElementById("countrynumber").innerHTML = "5";


      svg.selectAll("path").remove();

      d3.csv("data/polio_2006.csv",function(data) {

        d3.json("world_countries.json", function(json) {
      
            for (var i=0; i< data.length; i++) {
          var dataCountry = data[i].name;

          var dataValue = parseFloat(data[i].value);

          for (var j = 0; j < json.features.length; j++) {
            var jsonCountry = json.features[j].properties.name;

            if (dataCountry == jsonCountry) {
              json.features[j].properties.value = dataValue;

              break;
            }
          }
        }

        svg.selectAll("path")
          .data(json.features)
          .enter()
          // .transition()
          // .duration(1000)
          .append("path")
          .attr("class","map")
          .attr("d",path)
          .style("fill",function(d) {
            var value = d.properties.value;
            if (value ==1) {
              return "rgb(249, 77, 0)";
            } else {
              return "rgb(192,192,192)";
            }
          })
          .style("stroke","white")
          .style("stroke-width",0.3)
           .style("opacity",0.8)   
          .on("mouseover",function(d) {
            tip.show(d);
            d3.select(this)
              .style("opacity",1)
              .style("stroke-width",1.5);
          })
          .on("mouseout",function(d) {
            tip.hide(d);
            d3.select(this)
            .style("opacity",0.8)
            .style("stroke-width",0.3);
          })   
      });

  });
  };

 var function2007 = function() {
      document.getElementById("text").innerHTML = "2007";
          document.getElementById("year").innerHTML = "2007";
      document.getElementById("countrynumber").innerHTML = "4";

      svg.selectAll("path").remove();

      d3.csv("data/polio_2007.csv",function(data) {

        d3.json("world_countries.json", function(json) {
      
            for (var i=0; i< data.length; i++) {
          var dataCountry = data[i].name;

          var dataValue = parseFloat(data[i].value);

          for (var j = 0; j < json.features.length; j++) {
            var jsonCountry = json.features[j].properties.name;

            if (dataCountry == jsonCountry) {
              json.features[j].properties.value = dataValue;

              break;
            }
          }
        }

        svg.selectAll("path")
          .data(json.features)
          .enter()
          // .transition()
          // .duration(1000)
          .append("path")
          .attr("class","map")
          .attr("d",path)
          .style("fill",function(d) {
            var value = d.properties.value;
            if (value ==1) {
              return "rgb(249, 77, 0)";
            } else {
              return "rgb(192,192,192)";
            }
          })
          .style("stroke","white")
          .style("stroke-width",0.3)
           .style("opacity",0.8)   
          .on("mouseover",function(d) {
            tip.show(d);
            d3.select(this)
              .style("opacity",1)
              .style("stroke-width",1.5);
          })
          .on("mouseout",function(d) {
            tip.hide(d);
            d3.select(this)
            .style("opacity",0.8)
            .style("stroke-width",0.3);
          })   
      });

  });
  };

 var function2008 = function() {
      document.getElementById("text").innerHTML = "2008";
          document.getElementById("year").innerHTML = "2008";
      document.getElementById("countrynumber").innerHTML = "4";

      svg.selectAll("path").remove();

      d3.csv("data/polio_2008.csv",function(data) {

        d3.json("world_countries.json", function(json) {
      
            for (var i=0; i< data.length; i++) {
          var dataCountry = data[i].name;

          var dataValue = parseFloat(data[i].value);

          for (var j = 0; j < json.features.length; j++) {
            var jsonCountry = json.features[j].properties.name;

            if (dataCountry == jsonCountry) {
              json.features[j].properties.value = dataValue;

              break;
            }
          }
        }

        svg.selectAll("path")
          .data(json.features)
          .enter()
          // .transition()
          // .duration(1000)
          .append("path")
          .attr("class","map")
          .attr("d",path)
          .style("fill",function(d) {
            var value = d.properties.value;
            if (value ==1) {
              return "rgb(249, 77, 0)";
            } else {
              return "rgb(192,192,192)";
            }
          })
          .style("stroke","white")
          .style("stroke-width",0.3)
           .style("opacity",0.8)   
          .on("mouseover",function(d) {
            tip.show(d);
            d3.select(this)
              .style("opacity",1)
              .style("stroke-width",1.5);
          })
          .on("mouseout",function(d) {
            tip.hide(d);
            d3.select(this)
            .style("opacity",0.8)
            .style("stroke-width",0.3);
          })   
      });

  });
  };

 var function2009 = function() {
      document.getElementById("text").innerHTML = "2009";
          document.getElementById("year").innerHTML = "2009";
      document.getElementById("countrynumber").innerHTML = "4";

      svg.selectAll("path").remove();

      d3.csv("data/polio_2009.csv",function(data) {

        d3.json("world_countries.json", function(json) {
      
            for (var i=0; i< data.length; i++) {
          var dataCountry = data[i].name;

          var dataValue = parseFloat(data[i].value);

          for (var j = 0; j < json.features.length; j++) {
            var jsonCountry = json.features[j].properties.name;

            if (dataCountry == jsonCountry) {
              json.features[j].properties.value = dataValue;

              break;
            }
          }
        }

        svg.selectAll("path")
          .data(json.features)
          .enter()
          // .transition()
          // .duration(1000)
          .append("path")
          .attr("class","map")
          .attr("d",path)
          .style("fill",function(d) {
            var value = d.properties.value;
            if (value ==1) {
              return "rgb(249, 77, 0)";
            } else {
              return "rgb(192,192,192)";
            }
          })
          .style("stroke","white")
          .style("stroke-width",0.3)
           .style("opacity",0.8)   
          .on("mouseover",function(d) {
            tip.show(d);
            d3.select(this)
              .style("opacity",1)
              .style("stroke-width",1.5);
          })
          .on("mouseout",function(d) {
            tip.hide(d);
            d3.select(this)
            .style("opacity",0.8)
            .style("stroke-width",0.3);
          })   
      });

  });
  };

 var function2010 = function() {
      document.getElementById("text").innerHTML = "2010";
          document.getElementById("year").innerHTML = "2010";
      document.getElementById("countrynumber").innerHTML = "4";

      svg.selectAll("path").remove();

      d3.csv("data/polio_2010.csv",function(data) {

        d3.json("world_countries.json", function(json) {
      
            for (var i=0; i< data.length; i++) {
          var dataCountry = data[i].name;

          var dataValue = parseFloat(data[i].value);

          for (var j = 0; j < json.features.length; j++) {
            var jsonCountry = json.features[j].properties.name;

            if (dataCountry == jsonCountry) {
              json.features[j].properties.value = dataValue;

              break;
            }
          }
        }

        svg.selectAll("path")
          .data(json.features)
          .enter()
          // .transition()
          // .duration(1000)
          .append("path")
          .attr("class","map")
          .attr("d",path)
          .style("fill",function(d) {
            var value = d.properties.value;
            if (value ==1) {
              return "rgb(249, 77, 0)";
            } else {
              return "rgb(192,192,192)";
            }
          })
          .style("stroke","white")
          .style("stroke-width",0.3)
           .style("opacity",0.8)   
          .on("mouseover",function(d) {
            tip.show(d);
            d3.select(this)
              .style("opacity",1)
              .style("stroke-width",1.5);
          })
          .on("mouseout",function(d) {
            tip.hide(d);
            d3.select(this)
            .style("opacity",0.8)
            .style("stroke-width",0.3);
          })   
      });

  });
  };

var function2011 = function() {
      document.getElementById("text").innerHTML = "2011";
          document.getElementById("year").innerHTML = "2011";
      document.getElementById("countrynumber").innerHTML = "4";

      svg.selectAll("path").remove();

      d3.csv("data/polio_2011.csv",function(data) {

        d3.json("world_countries.json", function(json) {
      
            for (var i=0; i< data.length; i++) {
          var dataCountry = data[i].name;

          var dataValue = parseFloat(data[i].value);

          for (var j = 0; j < json.features.length; j++) {
            var jsonCountry = json.features[j].properties.name;

            if (dataCountry == jsonCountry) {
              json.features[j].properties.value = dataValue;

              break;
            }
          }
        }

        svg.selectAll("path")
          .data(json.features)
          .enter()
          // .transition()
          // .duration(1000)
          .append("path")
          .attr("class","map")
          .attr("d",path)
          .style("fill",function(d) {
            var value = d.properties.value;
            if (value ==1) {
              return "rgb(249, 77, 0)";
            } else {
              return "rgb(192,192,192)";
            }
          })
          .style("stroke","white")
          .style("stroke-width",0.3)
           .style("opacity",0.8)   
          .on("mouseover",function(d) {
            tip.show(d);
            d3.select(this)
              .style("opacity",1)
              .style("stroke-width",1.5);
          })
          .on("mouseout",function(d) {
            tip.hide(d);
            d3.select(this)
            .style("opacity",0.8)
            .style("stroke-width",0.3);
          })   
      });

  });
  };

  var function2012 = function() {
      document.getElementById("text").innerHTML = "2012";
          document.getElementById("year").innerHTML = "2012";
      document.getElementById("countrynumber").innerHTML = "3";

      svg.selectAll("path").remove();

      d3.csv("data/polio_2012.csv",function(data) {

        d3.json("world_countries.json", function(json) {
      
            for (var i=0; i< data.length; i++) {
          var dataCountry = data[i].name;

          var dataValue = parseFloat(data[i].value);

          for (var j = 0; j < json.features.length; j++) {
            var jsonCountry = json.features[j].properties.name;

            if (dataCountry == jsonCountry) {
              json.features[j].properties.value = dataValue;

              break;
            }
          }
        }

        svg.selectAll("path")
          .data(json.features)
          .enter()
          // .transition()
          // .duration(1000)
          .append("path")
          .attr("class","map")
          .attr("d",path)
          .style("fill",function(d) {
            var value = d.properties.value;
            if (value ==1) {
              return "rgb(249, 77, 0)";
            } else {
              return "rgb(192,192,192)";
            }
          })
          .style("stroke","white")
          .style("stroke-width",0.3)
           .style("opacity",0.8)   
          .on("mouseover",function(d) {
            tip.show(d);
            d3.select(this)
              .style("opacity",1)
              .style("stroke-width",1.5);
          })
          .on("mouseout",function(d) {
            tip.hide(d);
            d3.select(this)
            .style("opacity",0.8)
            .style("stroke-width",0.3);
          })   
      });

  });
  };

var function2013 = function() {
      document.getElementById("text").innerHTML = "2013";
               document.getElementById("year").innerHTML = "2013";
      document.getElementById("countrynumber").innerHTML = "3";

      svg.selectAll("path").remove();

      d3.csv("data/polio_2013.csv",function(data) {

        d3.json("world_countries.json", function(json) {
      
            for (var i=0; i< data.length; i++) {
          var dataCountry = data[i].name;

          var dataValue = parseFloat(data[i].value);

          for (var j = 0; j < json.features.length; j++) {
            var jsonCountry = json.features[j].properties.name;

            if (dataCountry == jsonCountry) {
              json.features[j].properties.value = dataValue;

              break;
            }
          }
        }

        svg.selectAll("path")
          .data(json.features)
          .enter()
          // .transition()
          // .duration(1000)
          .append("path")
          .attr("class","map")
          .attr("d",path)
          .style("fill",function(d) {
            var value = d.properties.value;
            if (value ==1) {
              return "rgb(249, 77, 0)";
            } else {
              return "rgb(192,192,192)";
            }
          })
          .style("stroke","white")
          .style("stroke-width",0.3)
           .style("opacity",0.8)   
          .on("mouseover",function(d) {
            tip.show(d);
            d3.select(this)
              .style("opacity",1)
              .style("stroke-width",1.5);
          })
          .on("mouseout",function(d) {
            tip.hide(d);
            d3.select(this)
            .style("opacity",0.8)
            .style("stroke-width",0.3);
          })   
      });

  });
  };

var function2014 = function() {
      document.getElementById("text").innerHTML = "2014";
               document.getElementById("year").innerHTML = "2014";
      document.getElementById("countrynumber").innerHTML = "3";

      svg.selectAll("path").remove();

      d3.csv("data/polio_2014.csv",function(data) {

        d3.json("world_countries.json", function(json) {
      
            for (var i=0; i< data.length; i++) {
          var dataCountry = data[i].name;

          var dataValue = parseFloat(data[i].value);

          for (var j = 0; j < json.features.length; j++) {
            var jsonCountry = json.features[j].properties.name;

            if (dataCountry == jsonCountry) {
              json.features[j].properties.value = dataValue;

              break;
            }
          }
        }

        svg.selectAll("path")
          .data(json.features)
          .enter()
          // .transition()
          // .duration(1000)
          .append("path")
          .attr("class","map")
          .attr("d",path)
          .style("fill",function(d) {
            var value = d.properties.value;
            if (value ==1) {
              return "rgb(249, 77, 0)";
            } else {
              return "rgb(192,192,192)";
            }
          })
          .style("stroke","white")
          .style("stroke-width",0.3)
           .style("opacity",0.8)   
          .on("mouseover",function(d) {
            tip.show(d);
            d3.select(this)
              .style("opacity",1)
              .style("stroke-width",1.5);
          })
          .on("mouseout",function(d) {
            tip.hide(d);
            d3.select(this)
            .style("opacity",0.8)
            .style("stroke-width",0.3);
          })   
      });

  });
  };

var function2015 = function() {
      document.getElementById("text").innerHTML = "2015";
               document.getElementById("year").innerHTML = "2015";
      document.getElementById("countrynumber").innerHTML = "2";

      svg.selectAll("path").remove();

      d3.csv("data/polio_2015.csv",function(data) {

        d3.json("world_countries.json", function(json) {
      
            for (var i=0; i< data.length; i++) {
          var dataCountry = data[i].name;

          var dataValue = parseFloat(data[i].value);

          for (var j = 0; j < json.features.length; j++) {
            var jsonCountry = json.features[j].properties.name;

            if (dataCountry == jsonCountry) {
              json.features[j].properties.value = dataValue;

              break;
            }
          }
        }

        svg.selectAll("path")
          .data(json.features)
          .enter()
          // .transition()
          // .duration(1000)
          .append("path")
          .attr("class","map")
          .attr("d",path)
          .style("fill",function(d) {
            var value = d.properties.value;
            if (value ==1) {
              return "rgb(249, 77, 0)";
            } else {
              return "rgb(192,192,192)";
            }
          })
          .style("stroke","white")
          .style("stroke-width",0.3)
           .style("opacity",0.8)   
          .on("mouseover",function(d) {
            tip.show(d);
            d3.select(this)
              .style("opacity",1)
              .style("stroke-width",1.5);
          })
          .on("mouseout",function(d) {
            tip.hide(d);
            d3.select(this)
            .style("opacity",0.8)
            .style("stroke-width",0.3);
          })  
      });

  });
  };



  var sliderfunction = function (event,value) {
    if (value == 1988) {
      function1988();
    }
    else if (value == 1989) {
      function1989();
    }
    else if (value == 1990) {
      function1990();
    }
     else if (value == 1991) {
      function1991();
    }
     else if (value == 1992) {
      function1992();
    }
     else if (value == 1993) {
      function1993();
    }
     else if (value == 1994) {
      function1994();
    }
     else if (value == 1995) {
      function1995();
    }
     else if (value == 1996) {
      function1996();
    }
     else if (value == 1997) {
      function1997();
    }
     else if (value == 1998) {
      function1998();
    }
     else if (value == 1999) {
      function1999();
    }
     else if (value == 2000) {
      function2000();
    }
    else if (value == 2001) {
      function2001();
    }
    else if (value == 2002) {
      function2002();
    }
    else if (value == 2003) {
      function2003();
    }
    else if (value == 2004) {
      function2004();
    }
    else if (value == 2005) {
      function2005();
    }
    else if (value == 2006) {
      function2006();
    }
    else if (value == 2007) {
      function2007();
    }
    else if (value == 2008) {
      function2008();
    }
    else if (value == 2009) {
      function2009();
    }
    else if (value == 2010) {
      function2010();
    }
     else if (value == 2011) {
      function2011();
    }
     else if (value == 2012) {
      function2012();
    }
     else if (value == 2013) {
      function2013();
    }
     else if (value == 2014) {
      function2014();
    }
     else if (value == 2015) {
      function2015();
    }
    else if (value == 1988) {
      function1988();
    }
    else {
      console.log(value);
  }
};

  d3.select('#time_slider').call(d3.slider().axis(true).min(1988).max(2015).step(1).on("slide",sliderfunction));


</script>

</body>
</html>